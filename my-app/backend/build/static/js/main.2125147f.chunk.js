(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),u=t.n(a),r=t(13),c=t.n(r),l=t(2),o=function(e){var n=e.person,t=e.deleteFunction;return u.a.createElement("tr",null,u.a.createElement("td",null,n.name),u.a.createElement("td",null,n.number),u.a.createElement("td",null,u.a.createElement("button",{onClick:t,value:n.name},"Delete")))},i=function(e){var n=e.persons,t=e.deleteFunction;return u.a.createElement("table",null,u.a.createElement("tbody",null,n.map((function(e){return u.a.createElement(o,{key:e.id,person:e,deleteFunction:t})}))))},m=t(3),f=t.n(m),s="/api/persons",d=function(){return f.a.get(s).then((function(e){return e.data}))},b=function(e){return f.a.post(s,e).then((function(e){return e.data}))},v=function(e,n){return f.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return f.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},E=(t(36),function(e){var n=e.addPerson,t=e.nameValue,a=e.nameHandler,r=e.numberValue,c=e.numberHandler;return u.a.createElement("form",{onSubmit:n},u.a.createElement("div",null,"Name:",u.a.createElement("input",{value:t,onChange:a})),u.a.createElement("div",null,"Number:",u.a.createElement("input",{value:r,onChange:c})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"add")))}),h=function(e){var n=e.value,t=e.filterHandler;return u.a.createElement("div",null,"Filter:",u.a.createElement("input",{value:n,onChange:t}))},g=function(e){var n=e.message,t=e.notificationType;return null===n?null:u.a.createElement("div",{className:t},n)},j=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),o=Object(l.a)(c,2),m=o[0],f=o[1],s=Object(a.useState)(""),j=Object(l.a)(s,2),O=j[0],w=j[1],y=Object(a.useState)(""),T=Object(l.a)(y,2),C=T[0],S=T[1],k=Object(a.useState)(!0),H=Object(l.a)(k,2),F=H[0],P=H[1],D=Object(a.useState)(null),L=Object(l.a)(D,2),N=L[0],V=L[1],A=Object(a.useState)(null),J=Object(l.a)(A,2),x=J[0],B=J[1];Object(a.useEffect)((function(){d().then((function(e){r(e)}))}),[]);var I=F?t:t.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())||e.number.toLowerCase().includes(C.toLowerCase())})),U=function(e){var n=t.find((function(n){return n.name===e.name})).id;v(n,e).then((function(n){r(t.map((function(t){return t.name!==e.name?t:n}))),B("Updated ".concat(e.name,"'s number to ").concat(e.number)),setTimeout((function(){B(null)}),5e3)})).catch((function(n){V("Person '".concat(e.name,"' was already deleted from server")),setTimeout((function(){V(null)}),5e3),r(t.filter((function(n){return n.name!==e.name})))}))};return u.a.createElement("div",null,u.a.createElement("h1",null,"Phonebook"),u.a.createElement(g,{message:N,notificationType:"error"}),u.a.createElement(g,{message:x,notificationType:"success"}),u.a.createElement(h,{value:C,filterHandler:function(e){S(e.target.value),e.target.value.length>0?F&&P(!1):P(!0)}}),u.a.createElement("h2",null,"Add a new"),u.a.createElement(E,{addPerson:function(e){e.preventDefault();var n={name:m,number:O};t.some((function(e){return e.name===m}))?window.confirm("".concat(m," is already added to phonebook, replace the old number with a new one?"))&&U(n):b(n).then((function(e){r(t.concat(e)),B("Added '".concat(n.name,"'")),setTimeout((function(){B(null)}),5e3)})).catch((function(e){V(e.response.data.message),setTimeout((function(){V(null)}),1e4)})),f(""),w("")},nameValue:m,nameHandler:function(e){f(e.target.value)},numberValue:O,numberHandler:function(e){w(e.target.value)}}),u.a.createElement("h2",null,"Numbers"),u.a.createElement(i,{persons:I,deleteFunction:function(e){var n=t.find((function(n){return n.name===e.target.value}));window.confirm("Delete ".concat(n.name,"?"))&&p(n.id).then((function(e){r(t.filter((function(e){return e.name!==n.name}))),B("Deleted '".concat(n.name,"'")),setTimeout((function(){B(null)}),5e3)})).catch((function(e){V("Person '".concat(n.name,"' is already deleted from the server")),setTimeout((function(){V(null)}),5e3),r(t.filter((function(e){return e.name!==n.name})))}))}}))};c.a.render(u.a.createElement(j,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.2125147f.chunk.js.map